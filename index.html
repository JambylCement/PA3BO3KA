<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–µ—Ä–µ–≤–∞—Ö—Ç–æ–≤–∫–∞</title>
    <style>
        body { font-family: sans-serif; padding: 15px; background: #f0f2f5; margin: 0; }
        .card { background: white; padding: 20px; border-radius: 15px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        
        .logo { display: block; margin: 0 auto 15px; max-width: 180px; height: auto; }

        .lang-switcher { display: flex; justify-content: flex-end; gap: 5px; margin-bottom: 15px; }
        .lang-btn { padding: 5px 10px; border: 1px solid #ccc; border-radius: 5px; background: white; cursor: pointer; }
        .lang-btn.active { background: #666; color: white; }

        .btn-group { display: flex; gap: 10px; margin-bottom: 10px; }
        .main-btn { flex: 1; padding: 15px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1em; color: white; }
        .btn-in { background: #4CAF50; }
        .btn-out { background: #2196F3; }
        
        /* –ö–Ω–æ–ø–∫–∞ —Å–ø–∏—Å–∫–∞ */
        .list-btn { width: 100%; padding: 12px; background: #607d8b; color: white; border: none; border-radius: 8px; font-size: 0.9em; font-weight: bold; cursor: pointer; margin-bottom: 20px; }

        #formStatus { text-align: center; font-weight: bold; margin-bottom: 20px; color: #333; font-size: 1.1em; height: 1.2em; }
        .field { margin-bottom: 15px; }
        label { display: block; font-size: 0.9em; color: #555; margin-bottom: 5px; font-weight: bold; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; box-sizing: border-box; font-size: 1em; }
        .submit-btn { width: 100%; padding: 15px; background: #333; color: white; border: none; border-radius: 8px; font-size: 1.1em; font-weight: bold; cursor: pointer; }

        #modalOverlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; justify-content: center; align-items: center; }
        .modal-content { background: white; padding: 25px; border-radius: 20px; width: 85%; max-width: 350px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
    </style>
</head>
<body>

<div class="card">
    <img src="logo.png" alt="Logo" class="logo">
    <div id="formStatus">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–µ–∑–¥–∫–∏ / –°–∞–ø–∞—Ä —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑</div>

    <div class="lang-switcher">
        <button class="lang-btn active" id="btnRu">RU</button>
        <button class="lang-btn" id="btnKz">KZ</button>
    </div>

    <div class="btn-group">
        <button class="main-btn btn-in" id="btnInAction">–ü–†–ò–ï–ó–î</button>
        <button class="main-btn btn-out" id="btnOutAction">–û–¢–™–ï–ó–î</button>
    </div>

    <button class="list-btn" onclick="window.open('https://docs.google.com/spreadsheets/d/e/2PACX-1vT5DTEHaa8T_TNnCJpRhtlDbVICsLJG1OFBwat_6WN0DIfL9tUBo5XTj0YsAHc8jLx3s3MX5HfA4gJe/pubhtml?gid=0&single=true', '_blank')">
        üëÄ –¢–Ü–ó–Ü–ú–î–Ü –ö”®–†–£ / –ü–†–û–°–ú–û–¢–† –°–ü–ò–°–ö–ê
    </button>


    <div class="field">
        <label id="labelName">–í–∞—à–µ –§–ò–û:</label>
        <input type="text" id="userName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
    </div>

    <div class="field">
        <label id="labelDept">–û—Ç–¥–µ–ª:</label>
        <select id="userDept">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª...</option>
            <option value="–ú–µ—Ö. —Ü–µ—Ö">–ú–µ—Ö. —Ü–µ—Ö</option>
            <option value="–ú–¢–ö (–∫–∞—Ä—å–µ—Ä)">–ú–¢–ö (–∫–∞—Ä—å–µ—Ä)</option>
            <option value="–≠–ª–µ–∫—Ç—Ä–æ—Ü–µ—Ö">–≠–ª–µ–∫—Ç—Ä–æ—Ü–µ—Ö</option>
            <option value="–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ">–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</option>
            <option value="–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è">–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏—è</option>
            <option value="–û—Ç–≥—Ä—É–∑–∫–∞">–û—Ç–≥—Ä—É–∑–∫–∞</option>
            <option value="–û–¢ –∏ –¢–ë">–û–¢ –∏ –¢–ë</option>
        </select>
    </div>

    <div class="field">
        <label id="labelDateTime">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:</label>
        <input type="datetime-local" id="travelTime">
    </div>

    <div class="field">
        <label id="labelStation">–°—Ç–∞–Ω—Ü–∏—è:</label>
        <select id="station">
            <option value="–ú—ã–Ω –ê—Ä–∞–ª">–ú—ã–Ω –ê—Ä–∞–ª</option>
            <option value="–®—ã–≥–∞–Ω–∞–∫">–®—ã–≥–∞–Ω–∞–∫</option>
        </select>
    </div>

    <button class="submit-btn" id="labelSubmit">–ì–û–¢–û–í–û</button>
</div>

<div id="modalOverlay">
    <div class="modal-content">
        <h2 id="modalTitle" style="margin-top: 0; color: #333;">üì¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ!</h2>
        <div id="modalContent" style="font-size: 1.1em; line-height: 1.8; margin: 20px 0; border-top: 1px solid #eee; border-bottom: 1px solid #eee; padding: 15px 0;"></div>
        <div style="display: flex; gap: 10px;">
            <button id="confirmBtn" style="flex: 2; background: #4CAF50; color: white; padding: 15px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">–û–¢–ü–†–ê–í–ò–¢–¨ üöÄ</button>
            <button id="editBtn" style="flex: 1; background: #f44336; color: white; padding: 15px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer;">–ü–†–ê–í–ò–¢–¨</button>
        </div>
    </div>
</div>

<script>
    const translations = {
        ru: {
            btnIn: "–ü–†–ò–ï–ó–î", btnOut: "–û–¢–™–ï–ó–î", name: "–í–∞—à–µ –§–ò–û:", dept: "–û—Ç–¥–µ–ª:",
            datetime: "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è:", station: "–°—Ç–∞–Ω—Ü–∏—è:", submit: "–ì–û–¢–û–í–û",
            statusIn: "–ü–†–ò–ï–ó–î", statusOut: "–û–¢–™–ï–ó–î",
            placeholder: "–í–≤–µ–¥–∏—Ç–µ –∏–º—è", chooseDept: "–í—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–¥–µ–ª..."
        },
        kz: {
            btnIn: "–ö–ï–õ–£", btnOut: "–ö–ï–¢–£", name: "–ê—Ç—ã-–∂”©–Ω—ñ“£—ñ–∑:", dept: "–ë”©–ª—ñ–º:",
            datetime: "–ö“Ø–Ω—ñ –º–µ–Ω —É–∞“õ—ã—Ç—ã:", station: "–°—Ç–∞–Ω—Ü–∏—è:", submit: "–î–ê–ô–´–ù",
            statusIn: "–ö–ï–õ–£", statusOut: "–ö–ï–¢–£",
            placeholder: "–ê—Ç—ã“£—ã–∑–¥—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑", chooseDept: "–ë”©–ª—ñ–º–¥—ñ —Ç–∞“£–¥–∞“£—ã–∑..."
        }
    };

    let currentLang = 'ru';

    function updateLanguage(lang) {
        currentLang = lang;
        document.getElementById('btnInAction').innerText = translations[lang].btnIn;
        document.getElementById('btnOutAction').innerText = translations[lang].btnOut;
        document.getElementById('labelName').innerText = translations[lang].name;
        document.getElementById('labelDept').innerText = translations[lang].dept;
        document.getElementById('labelDateTime').innerText = translations[lang].datetime;
        document.getElementById('labelStation').innerText = translations[lang].station;
        document.getElementById('labelSubmit').innerText = translations[lang].submit;
        document.getElementById('userName').placeholder = translations[lang].placeholder;
        document.getElementById('userDept').options[0].text = translations[lang].chooseDept;
        document.getElementById('btnRu').classList.toggle('active', lang === 'ru');
        document.getElementById('btnKz').classList.toggle('active', lang === 'kz');
        document.getElementById('formStatus').innerText = "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ–µ–∑–¥–∫–∏ / –°–∞–ø–∞—Ä —Ç“Ø—Ä—ñ–Ω —Ç–∞“£–¥–∞“£—ã–∑";
    }

    document.getElementById('btnInAction').onclick = () => { document.getElementById('formStatus').innerText = translations[currentLang].statusIn; };
    document.getElementById('btnOutAction').onclick = () => { document.getElementById('formStatus').innerText = translations[currentLang].statusOut; };
    document.getElementById('btnRu').onclick = () => updateLanguage('ru');
    document.getElementById('btnKz').onclick = () => updateLanguage('kz');

    window.onload = function() {
        const savedName = localStorage.getItem('userFullName');
        if (savedName) document.getElementById('userName').value = savedName;
        const savedDept = localStorage.getItem('userDept');
        if (savedDept) document.getElementById('userDept').value = savedDept;
    };

    document.getElementById('labelSubmit').onclick = function() {
        const name = document.getElementById('userName').value;
        const status = document.getElementById('formStatus').innerText;
        const deptValue = document.getElementById('userDept').value;
        const deptText = document.getElementById('userDept').options[document.getElementById('userDept').selectedIndex].text;
        const time = document.getElementById('travelTime').value;
        const stationText = document.getElementById('station').options[document.getElementById('station').selectedIndex].text;

        if (!name || status.includes("–í—ã–±–µ—Ä–∏—Ç–µ") || !deptValue || !time) {
            alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –í–°–ï –ø–æ–ª—è! / –ë–∞—Ä–ª—ã“õ ”©—Ä—ñ—Å—Ç–µ—Ä–¥—ñ —Ç–æ–ª—Ç—ã—Ä—ã“£—ã–∑!");
            return;
        }

        const checkText = `
            <b>–¢–∏–ø:</b> ${status}<br>
            <b>–§–ò–û:</b> ${name}<br>
            <b>–û—Ç–¥–µ–ª:</b> ${deptText}<br>
            <b>–í—Ä–µ–º—è:</b> ${time.replace('T', ' ')}<br>
            <b>–°—Ç–∞–Ω—Ü–∏—è:</b> ${stationText}
        `;

        document.getElementById('modalContent').innerHTML = checkText;
        document.getElementById('modalOverlay').style.display = 'flex';
    };

    document.getElementById('editBtn').onclick = () => {
        document.getElementById('modalOverlay').style.display = 'none';
    };

    document.getElementById('confirmBtn').onclick = () => {
        const webAppUrl = "https://script.google.com/macros/s/AKfycbwy72IndBmT5UAEcQd2-Oo4tmM2oB03n3YqHeFPBH-7jVXAtaUEsAO9fRHgB8l7Cq1t/exec"; 

        const data = {
            name: document.getElementById('userName').value,
            status: document.getElementById('formStatus').innerText,
            dept: document.getElementById('userDept').options[document.getElementById('userDept').selectedIndex].text,
            time: document.getElementById('travelTime').value.replace('T', ' '),
            station: document.getElementById('station').options[document.getElementById('station').selectedIndex].text
        };

        localStorage.setItem('userFullName', data.name);
        localStorage.setItem('userDept', document.getElementById('userDept').value);

        document.getElementById('confirmBtn').disabled = true;
        document.getElementById('confirmBtn').innerText = "–û–¢–ü–†–ê–í–õ–Ø–Æ...";

        fetch(webAppUrl, {
            method: 'POST',
            mode: 'no-cors',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        })
        .then(() => {
            alert("–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã! / –°”ô—Ç—Ç—ñ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ!");
            document.getElementById('modalOverlay').style.display = 'none';
            document.getElementById('confirmBtn').disabled = false;
            document.getElementById('confirmBtn').innerText = "–û–¢–ü–†–ê–í–ò–¢–¨ üöÄ";
        })
        .catch(error => {
            alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
            document.getElementById('confirmBtn').disabled = false;
        });
    };
</script>
</body>
</html>



